"use strict";(self.webpackChunknextradocs=self.webpackChunknextradocs||[]).push([[438],{2351:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var t=s(4848),r=s(8453);const i={sidebar_position:2},a="Setting Up PostgreSQL",o={id:"tutorials/database/setup-databse",title:"Setting Up PostgreSQL",description:"Local Development",source:"@site/docs/tutorials/database/setup-databse.mdx",sourceDirName:"tutorials/database",slug:"/tutorials/database/setup-databse",permalink:"/docs/tutorials/database/setup-databse",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Database with Drizzle ORM",permalink:"/docs/tutorials/database/introduction"},next:{title:"Creating Database Tables",permalink:"/docs/tutorials/database/schema"}},l={},d=[{value:"Local Development",id:"local-development",level:2},{value:"Manual Setup Options",id:"manual-setup-options",level:3},{value:"Production Database",id:"production-database",level:2},{value:"Using Neon",id:"using-neon",level:3},{value:"Alternative Providers",id:"alternative-providers",level:3},{value:"Migrations",id:"migrations",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"setting-up-postgresql",children:"Setting Up PostgreSQL"}),"\n",(0,t.jsx)(n.h2,{id:"local-development",children:"Local Development"}),"\n",(0,t.jsx)(n.p,{children:"The starter kit includes a setup script that uses Docker to quickly set up your local database:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pnpm setup-db\n"})}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"What does the setup script do?"}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Stops and removes existing database container (if any)"}),"\n",(0,t.jsxs)(n.li,{children:["Creates a new PostgreSQL container with:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Database name: ",(0,t.jsx)(n.code,{children:"starter-kit"})]}),"\n",(0,t.jsxs)(n.li,{children:["User: ",(0,t.jsx)(n.code,{children:"postgres"})]}),"\n",(0,t.jsxs)(n.li,{children:["Password: ",(0,t.jsx)(n.code,{children:"postgres"})]}),"\n",(0,t.jsxs)(n.li,{children:["Port: ",(0,t.jsx)(n.code,{children:"5432"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Waits for database to be ready"}),"\n",(0,t.jsx)(n.li,{children:"Runs all migrations automatically"}),"\n"]}),(0,t.jsx)(n.p,{children:"The script ensures a clean, consistent development environment."})]}),"\n",(0,t.jsx)(n.h3,{id:"manual-setup-options",children:"Manual Setup Options"}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Using Docker Manually"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run --name starter-kit-db \\\n  -e POSTGRES_PASSWORD=postgres \\\n  -e POSTGRES_USER=postgres \\\n  -e POSTGRES_DB=starter-kit \\\n  -p 5432:5432 \\\n  -d postgres\n"})}),(0,t.jsxs)(n.p,{children:["Update your ",(0,t.jsx)(n.code,{children:".env.local"}),":"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:'DATABASE_URL="postgresql://postgres:postgres@localhost:5432/starter-kit"\n'})})]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Local PostgreSQL Installation"}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Download from ",(0,t.jsx)(n.a,{href:"https://www.postgresql.org/download/",children:"PostgreSQL website"})]}),"\n",(0,t.jsx)(n.li,{children:"Create a new database:"}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"createdb starter-kit\n"})}),(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["Update your ",(0,t.jsx)(n.code,{children:".env.local"})," with the connection string"]}),"\n"]})]}),"\n",(0,t.jsx)(n.h2,{id:"production-database",children:"Production Database"}),"\n",(0,t.jsx)(n.h3,{id:"using-neon",children:"Using Neon"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://neon.tech",children:"Neon"})," provides serverless PostgreSQL with a generous free tier:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create account at ",(0,t.jsx)(n.a,{href:"https://neon.tech",children:"neon.tech"})]}),"\n",(0,t.jsx)(n.li,{children:"Create new project"}),"\n",(0,t.jsx)(n.li,{children:"Copy the connection string"}),"\n",(0,t.jsx)(n.li,{children:"Update your production environment:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:'DATABASE_URL="postgresql://[user]:[password]@[host]/[database]"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"alternative-providers",children:"Alternative Providers"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://supabase.com",children:"Supabase"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://railway.app",children:"Railway"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://aws.amazon.com/rds/",children:"AWS RDS"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"migrations",children:"Migrations"}),"\n",(0,t.jsx)(n.p,{children:"After setting up your database, run migrations:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Generate migration\npnpm drizzle-kit generate:pg\n\n# Apply migration\npnpm db:push\n"})}),"\n",(0,t.jsx)(n.admonition,{title:"Development Workflow",type:"tip",children:(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Make changes to ",(0,t.jsx)(n.code,{children:"schema.ts"})]}),"\n",(0,t.jsx)(n.li,{children:"Generate migration"}),"\n",(0,t.jsx)(n.li,{children:"Apply migration"}),"\n",(0,t.jsx)(n.li,{children:"Test your changes"}),"\n"]})}),"\n",(0,t.jsx)(n.admonition,{title:"Production Deployments",type:"warning",children:(0,t.jsx)(n.p,{children:"Always backup your database before running migrations in production!"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var t=s(6540);const r={},i=t.createContext(r);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);